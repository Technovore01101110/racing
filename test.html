<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Sliding Event Slideshow</title>
<style>
  :root {
    --width: 800px;
    --height: 320px;
    --transition-time: 500ms;
    --bg: #111827;
    --card-bg: #ffffff;
    --accent: #2563eb;
  }

  body {
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    display:flex;
    min-height:100vh;
    align-items:center;
    justify-content:center;
    background: linear-gradient(180deg,#0f172a,#0b1220);
    margin:0;
    color:#0b1220;
  }

  /* Slideshow shell */
  .slideshow {
    position: relative;
    width: var(--width);
    height: var(--height);
    overflow: hidden;
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(2,6,23,0.6);
    background: linear-gradient(180deg,#f8fafc,#eef2ff);
  }

  /* slide - absolute stackable card */
  .slide {
    position: absolute;
    inset: 0; /* top:0;left:0;right:0;bottom:0 */
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 24px;
    box-sizing: border-box;
    transition: transform var(--transition-time) cubic-bezier(.2,.9,.2,1), opacity var(--transition-time);
    will-change: transform, opacity;
    pointer-events: auto;
    background: var(--card-bg);
  }

  /* Off-screen start positions */
  .enter-left  { transform: translateX(-100%); }
  .enter-right { transform: translateX(100%); }

  /* In-center */
  .center { transform: translateX(0); }

  /* Exit targets */
  .exit-left  { transform: translateX(-100%); opacity: 0.95; }
  .exit-right { transform: translateX(100%); opacity: 0.95; }

  /* Keep arrows on top */
  .arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 44px;
    height: 44px;
    border-radius: 8px;
    background: rgba(255,255,255,0.9);
    border: none;
    display: grid;
    place-items: center;
    cursor: pointer;
    box-shadow: 0 6px 18px rgba(2,6,23,0.3);
    margin:0;
  }
  .arrow:active { transform: translateY(-50%) scale(.98); }
  .arrow-left { left: 12px; }
  .arrow-right { right: 12px; }

  .arrow svg { width:18px; height:18px; fill: none; stroke: var(--bg); stroke-width: 2.2; }

  /* content inside a slide */
  .card {
    width: 100%;
    max-width: 720px;
    display:grid;
    grid-template-columns: 1fr 220px;
    gap: 18px;
    align-items:center;
  }
  .card .info {
    padding: 12px 0;
  }
  .title {
    font-size: 20px;
    font-weight: 700;
    color: var(--bg);
    margin: 0 0 8px 0;
  }
  .desc { margin:0 0 10px 0; color: #334155; line-height:1.4; }
  .meta { color: #475569; font-size: 14px; }
  .thumbnail {
    height: 150px;
    width: 200px;
    border-radius: 10px;
    object-fit: cover;
    background:#e2e8f0;
    box-shadow: 0 6px 20px rgba(2,6,23,0.06);
  }

  /* disabled pointer interaction while animating */
  .slideshow.animating { pointer-events: none; }

  /* small responsive */
  @media (max-width:900px) {
    :root { --width: 92vw; --height: 300px; }
    .card { grid-template-columns: 1fr; }
    .thumbnail { width:100%; height:140px; }
  }
</style>
</head>
<body>

<div class="slideshow" id="slideshow" aria-live="polite">
  <!-- slides will be inserted here by JS -->
  <button class="arrow arrow-left" id="prevBtn" aria-label="Previous event">
    <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M15 18l-6-6 6-6"/></svg>
  </button>
  <button class="arrow arrow-right" id="nextBtn" aria-label="Next event">
    <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M9 6l6 6-6 6"/></svg>
  </button>
</div>

<script>
/* --- Example JSON data (replace or fetch a file called 'events.json' if you prefer) --- */
const eventsJson = [
  {
    "title": "Autumn Coding Meetup",
    "description": "An evening of lightning talks and coding challenges. Bring your laptop.",
    "date": "Nov 14, 2025",
    "location": "Room 204, Tech House",
    "image": "https://picsum.photos/id/1011/600/400"
  },
  {
    "title": "Design Sprint Showcase",
    "description": "See what teams built in 48 hours. Demos + pizza.",
    "date": "Dec 2, 2025",
    "location": "Main Hall",
    "image": "https://picsum.photos/id/1015/600/400"
  },
  {
    "title": "Open Source Contribution Night",
    "description": "Pair up and contribute to open source projects. Mentors available.",
    "date": "Jan 8, 2026",
    "location": "Virtual",
    "image": "https://picsum.photos/id/1027/600/400"
  }
];

/* If you have an external JSON file (events.json) use fetch instead:
fetch('events.json')
  .then(r => r.json())
  .then(data => { events = data; initSlideshow(); });
*/

let events = eventsJson; // in production replace with fetched data
let currentIndex = 0;
const slideshow = document.getElementById('slideshow');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
let currentSlideEl = null;
let animating = false;

function createSlideElement(eventObj) {
  const el = document.createElement('section');
  el.className = 'slide';
  el.setAttribute('role','group');
  el.setAttribute('aria-roledescription','slide');

  el.innerHTML = `
    <div class="card" aria-hidden="false">
      <div class="info">
        <h3 class="title">${escapeHtml(eventObj.title)}</h3>
        <p class="desc">${escapeHtml(eventObj.description)}</p>
        <div class="meta">${escapeHtml(eventObj.date)} â€” ${escapeHtml(eventObj.location)}</div>
      </div>
      <img class="thumbnail" src="${escapeHtml(eventObj.image)}" alt="${escapeHtml(eventObj.title)} thumbnail" />
    </div>
  `;
  return el;
}

/* Utility to avoid naive HTML injection (simple escape) */
function escapeHtml(s) {
  return String(s).replace(/[&<>"']/g, (c) => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]));
}

/* Initialize: put first slide in center */
function initSlideshow() {
  currentIndex = 0;
  const first = createSlideElement(events[currentIndex]);
  first.classList.add('center');
  slideshow.appendChild(first);
  currentSlideEl = first;
}

/* Perform slide animation.
   direction: 'left' -- user clicked prev (new slide enters from left, old exits right)
              'right' -- user clicked next (new slide enters from right, old exits left)
*/
function goTo(nextIndex, direction) {
  if (animating) return; // debounce clicks
  if (nextIndex < 0) nextIndex = events.length - 1;
  if (nextIndex >= events.length) nextIndex = 0;
  if (nextIndex === currentIndex) return;

  animating = true;
  slideshow.classList.add('animating');

  const nextEvent = events[nextIndex];
  const nextEl = createSlideElement(nextEvent);

  // Set initial off-screen class
  if (direction === 'right') {
    // user requested NEXT: new enters from right (enter-right),
    // old exits left (exit-left)
    nextEl.classList.add('enter-right');
  } else {
    // user requested PREV: new enters from left
    nextEl.classList.add('enter-left');
  }

  // place next element in DOM (above current since absolute)
  slideshow.appendChild(nextEl);

  // Force a reflow so the browser registers the starting transform
  // (this is necessary before removing the enter-* class to trigger transition)
  void nextEl.offsetWidth;

  // start the transitions: bring next to center, move current out
  nextEl.classList.add('center');
  if (direction === 'right') {
    currentSlideEl.classList.add('exit-left');
  } else {
    currentSlideEl.classList.add('exit-right');
  }

  // Listen for transition end on next element (more robust than old element)
  function onEnd(e) {
    if (e.target !== nextEl) return;
    // Cleanup
    nextEl.removeEventListener('transitionend', onEnd);
    // Remove old slide element
    if (currentSlideEl && currentSlideEl.parentNode) {
      currentSlideEl.parentNode.removeChild(currentSlideEl);
    }
    // ensure nextEl has only 'slide' + 'center'
    nextEl.className = 'slide center';
    currentSlideEl = nextEl;
    currentIndex = nextIndex;
    animating = false;
    slideshow.classList.remove('animating');
  }

  nextEl.addEventListener('transitionend', onEnd);

  // Safety fallback: if transitionend doesn't fire (e.g., user stops animation),
  // force finalize after slightly longer than CSS transition
  setTimeout(() => {
    if (animating) {
      // finalize anyway
      try { nextEl.dispatchEvent(new Event('transitionend')); } catch(e){ /* ignore */ }
    }
  }, 700);
}

/* Wire buttons and keyboard */
prevBtn.addEventListener('click', () => goTo(currentIndex - 1, 'left'));
nextBtn.addEventListener('click', () => goTo(currentIndex + 1, 'right'));
document.addEventListener('keydown', (e) => {
  if (e.key === 'ArrowLeft') prevBtn.click();
  if (e.key === 'ArrowRight') nextBtn.click();
});

/* Initialize now (or after fetch) */
initSlideshow();

</script>
</body>
</html>
